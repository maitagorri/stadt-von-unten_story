<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>
        <title></title>
    </head>
    <body>
        <div id="map">
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="data/Dragoner_0.js"></script>
        <script src="data/Gewerbe_1.js"></script>
        <script>
        var map = L.map('map', {
            zoomControl:true, maxZoom:28, minZoom:1
        }).setView(L.latLng(52.495085,13.3865977),18);
        var hash = new L.Hash(map);
        map.attributionControl.addAttribution('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a>');
        var bounds_group = new L.featureGroup([]);
        var basemap0 = L.tileLayer('http://a.tile.stamen.com/toner/{z}/{x}/{y}.png', {
            attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>,<a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Mapdata: &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>contributors,<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
            maxZoom: 28
        });
        basemap0.addTo(map);
        function setBounds() {
        }
        function pop_Dragoner_0(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Name'] !== null ? Autolinker.link('Dragonerareal') : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400}).on("click", function (event) {
				map.fitBounds(event.target.getBounds(),'animate');
				}
			);
        }

        function style_Dragoner_0_0() {
            return {
                pane: 'pane_Dragoner_0',
                opacity: 1,
                color: 'rgba(131,128,128,0.207843137255)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 2.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(151,72,16,0.207843137255)',
            }
        }
        map.createPane('pane_Dragoner_0');
        map.getPane('pane_Dragoner_0').style.zIndex = 400;
        map.getPane('pane_Dragoner_0').style['mix-blend-mode'] = 'normal';
        var layer_Dragoner_0 = new L.geoJson(json_Dragoner_0, {
            attribution: '<a href=""></a>',
            pane: 'pane_Dragoner_0',
            onEachFeature: pop_Dragoner_0,
            style: style_Dragoner_0_0,
        });
        bounds_group.addLayer(layer_Dragoner_0);
        map.addLayer(layer_Dragoner_0);
		
		function clickZoom(e) {
			L.DomEvent.stopPropagation(e);
			map.flyTo(e.target.getLatLng(),19);
		}
		
        function pop_Gewerbe_1(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2"><strong>' + (feature.properties['Name'] !== null ? Autolinker.link(String(feature.properties['Name'])) : '') + '</strong></td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><img src=' + '"http://stadtvonunten.de/wp-content/uploads/2014/07/gelaende.png"' + ' style="width:200px;height:200px;" /> </td>\
                    </tr>\
					 <tr>\
                        <td colspan="2"><strong>... erz√§hlt:</strong><br />' + 'Lorem ipsum dolor sit amet, pri cu prompta docendi signiferumque, alterum comprehensam vim at. Vel no graece malorum perfecto, sea aliquam eloquentiam ne, errem adolescens mea id. Eius petentium contentiones eum ex. Facilisis similique cum id, vim ad porro aperiri urbanitas. Minim audiam ne usu, eu vix justo elitr propriae.' + '</td>\
                    </tr>'+
/*                    <tr>\
                        <td colspan="2"><strong>Position</strong><br />' + (feature.geometry.coordinates !== null ? Autolinker.link(String(feature.geometry.coordinates)) : '') + '</td>\
                    </tr>\
*/                '</table>';
            layer.on('click',clickZoom).bindPopup(popupContent, {autoPan: true, maxHeight:400, keepInView:true});
//			map.flyTo(feature.geometry.coordinates,19);
        }

        function style_Gewerbe_1_0() {
            return {
                pane: 'pane_Gewerbe_1',
                radius: 10.0,
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(229,235,153,1.0)',
            }
        }
		
		// we have to be able to get out of the storyview again...
		<!-- function onMapClick(e) { -->
			<!-- popup -->
			<!-- .setLatLng(e.latlng) -->
			<!-- .setContent("You clicked the map at " + e.latlng.toString()) -->
			<!-- .openOn(mymap); -->
		<!-- } -->

		<!-- mymap.on('click', onMapClick); -->
		
        map.createPane('pane_Gewerbe_1');
        map.getPane('pane_Gewerbe_1').style.zIndex = 401;
        map.getPane('pane_Gewerbe_1').style['mix-blend-mode'] = 'normal';
        var layer_Gewerbe_1 = new L.geoJson(json_Gewerbe_1, {
            attribution: '<a href=""></a>',
            pane: 'pane_Gewerbe_1',
            onEachFeature: pop_Gewerbe_1,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_Gewerbe_1_0(feature));
            },
        });
        bounds_group.addLayer(layer_Gewerbe_1);
        map.addLayer(layer_Gewerbe_1);
        setBounds();
        </script>
    </body>
</html>
